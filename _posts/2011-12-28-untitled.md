---
layout: post
title: untitled
---

Try naive scrape of Windows Phone Marketplace app. For instance,
Tentacles:

    http://www.windowsphone.com/en-US/apps/6651b8fe-0da1-e011-986b-78e7d1fa76f8

Returns some bogus HTML.

    <html>
        <head>
            <meta http-equiv="REFRESH" content="0; URL=http://www.windowsphone.com/en-US/apps/6651b8fe-0da1-e011-986b-78e7d1fa76f8" />
            <script type="text/javascript">
                function OnBack(){}
            </script>
        </head>
    </html>

The Windows Phone Marketplace sets a cookie and does some redirection.
See this StackOverflow answer:

    http://stackoverflow.com/a/8047329

So we can use Python's CookieJar class to load the required cookies.
Then we can begin to parse the page. We don't want to use regular
expressions <http://stackoverflow.com/a/1732454>, so we'll go with
BeautifulSoup <http://www.crummy.com/software/BeautifulSoup/>.

Most of the information is pretty easy to get. We can just extract
it right out of the DOM. Some of the data takes a little finagling.

Rating in particular takes some work, since its only expressed as
a class name, and the class name isn't numerical. We'll write a
function to handle transforming the psuedo-english class name into
a number.

Now we've got all the information about this app in an easy-to-use
format. But what if you want to get information about lots of apps?
The current function will make two requests every time: one to set
the cookie, and another to get the actual data. So let's just get
the cookie once.

Now you can quickly scrape lots of app data from the Windows Phone
Marketplace. The full code from this post is available on GitHub:
https://gist.github.com/1518335
