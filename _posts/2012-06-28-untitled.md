---
layout: post
title: untitled
published: false
---

I'm particularly excited about a new feature in the [Famigo Sandbox][]: bundled apps. We introduced our first pass in version 1.6, which our users loved. The next version is going to be even better, and we're working hard to get it in your hands in the next couple of weeks.

This is the idea: refer a friend to the Sandbox and you both get a free app. That's it! Refer lots of people and you'll get lots of free apps.

## Front End

We wanted this feature to be as easy as possible to use. No signup codes, nothing to remember or hang on to, and immediate results. Here's what you, as a user of the Sandbox, have to do:

1.  Tap the glowing share button in manage mode.
2.  Select the people you want to share the Sandbox with.
3.  Send them an email.

And you're done! We even prepopulate the email's recipients, subject, and body. All your have to do is hit send.

On the other side of things, this is what the recipients of your email have to do:

1.  Open your email, read it and click on the link.
2.  Download, install, and run the Sandbox.

That's it! Once they finish setting up their Sandbox, you'll both get a push notification with your free app. Piece of cake, right?

## Back End

In order to make things easy for the end-user, we have to do some magic on the back end. It's not terribly complicated, but I think it's a pretty novel referral program. Here's how it works:

After the user selects the contacts they want to share with, their email addresses are uploaded to our server. We hash them, store them for later, and send back a shareable URL.

When any of the recipients go to the URL their friend sent them, we note that they opened it and send them along to the Play Store. Nothing interesting happens at this step, but it allows us to effectively track users throughout the process.

Then they download and install the Sandbox. Running it logs them in, at which point we hash their email and check for any referrals to redeem. If there is one, we mark it as used and pick an app they don't have already. (If they already have all the apps we've got, we apologize in an email.)

Now we know a referral has been completed and we've picked a new app for both people to get. We need to get it to them! So we pass the baton to [Urban Airship][], who sends a push notification to both devies.

## Privacy

Because of this feature, the Sandbox now requests the [`READ_CONTACTS`][] permission. We were hesitant to request this permission. We don't want to betray our users' trust. Also, our users' privacy is very important to us.

To that end, this is exactly what happens:

1.  You, as a user of the Sandbox, decide to share it with your friends and family. From manage mode, you tap the glowing share button. It tells you what's going to happen and asks you to select some contacts.
2.  We read your contacts and show you an easy way to select emails. This is the only point in the Sandbox where your contacts are accessed.
3.  After selecting some contacts, their emails are uploaded to Famigo, where they are hashed and stored. They are uploaded through our API, which logs the call for about six hours. After that, the email addresses are unrecoverable.
4.  You are presented with the default email app, pre-populated with the contacts you selected and a shareable URL.
5.  Some time later, one of the people you referred opens the link you sent them, downloads the Sandbox and runs it. When they do that, we hash the email and check to see if anyone referred them.
6.  Thirty days after you sent the email, we remove the email addresses from our database and invalidate the referral.

[]: https://play.google.com/store/apps/details?id=com.famigo.sandbox
[]: http://urbanairship.com/
[]: http://developer.android.com/reference/android/Manifest.permission.html#READ_CONTACTS
