---
title: untitled
---

While working on [pressing the button with Haskell][],
I needed to establish a secure WebSocket (WSS) connection.
Unfprtunately the existing [`websockets` package][] did not support secure WebSockets.
I looked around and found [an issue][] addressing it.
It had a few workarounds by [@jaspervdj][], [@mpickering][], and [@elfenlaid][].
They got the job done,
but weren't nearly as easy to use as the insecure `runClient` function.
I figured that other people could benefit from having a turnkey WSS solution,
so I packaged it up and released it as [Wuss][].

I was surprised by how easy it was to add support for secure clients to the `websockets` package.
It only took [five lines of code][].
That is a testament to the design of that package,
the strength of the ecosystem,
and the expressiveness of Haskell as a language.

{% highlight hs %}
runSecureClientWith host port path options headers app = do
    context <- initConnectionContext
    connection <- connectTo context (connectionParams host port)
    stream <- makeStream (reader connection) (writer connection)
    runClientWithStream stream host path options headers app
{% endhighlight %}

[pressing the button with haskell]: {% post_url 2015-04-23-pressing-the-button-with-haskell %}
[`websockets` package]: http://hackage.haskell.org/package/websockets
[an issue]: https://github.com/jaspervdj/websockets/issues/41
[@jaspervdj]: https://gist.github.com/jaspervdj/7198388
[@mpickering]: https://gist.github.com/mpickering/f1b7ba3190a4bb5884f3
[@elfenlaid]: https://gist.github.com/elfenlaid/7b5c28065e67e4cf0767
[wuss]: http://taylor.fausak.me/wuss/
[five lines of code]: https://github.com/tfausak/wuss/blob/v1.0.2/Wuss.hs#L117-L121
