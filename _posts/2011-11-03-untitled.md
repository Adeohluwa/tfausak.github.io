---
layout: post
title: untitled
published: false
---

Yesterday, [I introduced a new feature][1] I worked on this week:
[Famigo Applists][2]. Today, I'll talk about developing the user
interface and backend for creating applists.

## Frontend

Creating applists relies on finding the apps you want and easily
adding them to your list. Hunting for each app in the Android Market
and pasting its URL into a text box is no fun.

I leveraged our database of over 30,000 apps to provide an autocomplete
dropdown for the user. Start typing the name of the app you want,
then select it from the dropdown. Nothing could be simpler!

To implement it, I turned to [jQuery UI][3] since [jQuery][4] is
my JavaScript library of choice. Plus, jQuery UI has a built-in
[autocomplete widget][5] that does everything I need. It's highly
configuratable, to boot.

I set it up with a customized list of suggestions, a hook on
selection, and a remote data source (more on that later). Two
functions handle all the customization: `autocomplete_render` creates
suggestions, and `autocomplete_select` creates a DOM element when
you select a suggestion.

It's import to create good suggestions in `autocomplete_render` so
that users can pick an app with confidence. (Try searching for ["angry
birds"][6] if you don't know what I'm talking about.) Including the
icon, developer, and platform (Android or iOS) along with the app
name should help the user pick the right app.

    {% highlight js %}
    function autocomplete_render (ul, item) {
        return $('<li/>')
            .data('item.autocomplete', item)
            .append($('a/>')
                .append($('<img/>')
                    .addClass('platform')
                    .attr('src', item.platform))
                .append($('<img/>')
                    .addClass('icon')
                    .attr('src', item.icon))
                .append($('<span/>')
                    .addClass('name')
                    .html(item.name))
                .append($('<span/>')
                    .addClass('developer')
                    .html(item.developer)))
            .appendTo(ul);
    };
    {% endhighlight %}

![Screenshot of the autocomplete dropdown][7]

For the second, I already had a template to follow. I used the same
formatting as our [shared sandbox page][8] and just translated it
into jQuery. Each list item has the same information as the dropdown,
but it's styled differently.

We also need to do a couple other small things in this function.
One, we need to add the app to the top of the applist. We do this
using jQuery's `slideDown` function. Also, we have to empty the
autocomplete box and re-focus on it so the user can add another
app.

{% highlight js %}
function autocomplete_select (event, ui) {
    $('<li/>')
        .append($('<img/>')
            .addClass('platform')
            .attr('src', '...'))
        .append($('<img/>')
            .addClass('icon')
            .attr('src', '...'))
        .append($('<div/>')
            .addClass('name')
            .html('...'))
        .append($('<div/>')
            .addClass('developer')
            .html('...'))
        .hide()
        .prependTo('#list')
        .slideDown();
    $(this).focus().val('');
    return false;
}
{% endhighlight %}

![Screenshot of an app in the applist][9]

All that's left is to enable the autocompletion widget and set it
up to use our custom functions.

{% highlight js %}
$('#autocomplete').autocomplete({
    select: autocomplete_select,
    source: '/applist/autocomplete/'
}).data('autocomplete')._renderItem = autocomplete_render;
{% endhighlight %}

[1]: /2011/11/02/applists-playlists-for-your-apps/
[2]: http://www.famigo.com/applist/
[3]: http://jqueryui.com/
[4]: http://jquery.com/
[5]: http://jqueryui.com/demos/autocomplete/
[6]: https://market.android.com/search?q=angry+birds
[7]: /static/images/2011-11-02-figure-1.png
[8]: http://www.famigo.com/family/TkhYNRMsAG1JYT0fCBMNASkZZW0CbCxa/sandbox/
[9]: /static/images/2011-11-02-figure-2.png
