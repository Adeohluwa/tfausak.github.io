---
layout: post
title: Mobile Web App Icons and Startup Images for iOS
published: false
---

Apple makes it a piece of cake to develop mobile web apps for iOS.
Unfortunately, [their documentation on configuring web applications][1]
is woefully out of date. It hasn't been updated since October of
last year.

In and of itself, that's not a problem. But it hasn't been updated
to explain icons for the new iPad. And it doesn't explain how to
set startup images for retina displays or any iPad.

## Icons

Apple's documentation for icons pretty much covers all the bases,
but they don't explicitly say how to specify an icon for the new
iPad. The iPad 2's icons are 72x72. The new iPad resolution is
doubled, so its icons are 144x144. Just like the iPad 2 and retina
devices, the `sizes` attribute works for the new iPad.

    <link rel="apple-touch-icon"
          sizes="144x144"
          href="apple-touch-icon-144x144.png">

If you don't want to specify the icon in your markup, you can let
the device search for it. It will look for the following images in
the root directory of your website:

1.  `apple-touch-icon-144x144-precomposed.png`
2.  `apple-touch-icon-144x144.png`
3.  `apple-touch-icon-precomposed.png`
4.  `apple-touch-icon.png`

## Startup Images

The documentation for startup images is annoyingly sparse. They
only cover portrait startup images for iPhones and iPod touches.
No mention of retina displays, iPads, or landscape images.

Firts things first: portrait is the only supported orientation on
iPhones and iPod touches. Your web app will never start in landscape
orientation because the home screen is always in the portrait
orientation. Starting a web app with the device held sideways will
load in portrait, then rotate to landscape.

That means that the startup image for an iPhone or iPod touch must
be the resolution they specify, 320x460. For retina devices, double
that to get 640x920. Unfortunately, there's no `sizes` attribute
to let the device know it should load a higher resolution startup
image.

For a while, I couldn't figure this out. Why wouldn't Apple let us
specify the sizes of the startup images? Then I stumbled across an
amazingly useful [Gist about iOS web app configuration][2]. It
reminded me that startup images are just links, which means you can
use media queries on them.

With that in mind, it was easy to single out each device's startup
image. All iPhones and iPod touches report the same resolution: 320
by 480. However, devices with a retina screen have a [pixel ratio][3]
of 2. Similarly, all iPads report a resolution of 768x1024, but
retina iPads have a pixel ratio of 2.

That's everything that you need to specify the startup images for
iPhones and iPod touches, both regular and retina.

    <link rel="apple-touch-startup-image"
          media="(device-width: 320px)"
          href="apple-touch-startup-image-320x460.png">
    <link rel="apple-touch-startup-image"
          media="(device-width: 320px)
             and (-webkit-device-pixel-ratio: 2)"
          href="apple-touch-startup-image-640x920.png">

iPads are a little trickier. They can start web apps in either
portrait or landscape orientation. This means you'll need two images:
one for portrait and one for landscape. Then, you need high resolution
versions of those images for retina iPads. All told, it takes four
images to cover all your bases.

But how will the iPad know which version to use? Fortunately, media
queries have us covered again. Simply specifying the orientation
will make the iPad load the correct startup image.

    <link rel="apple-touch-startup-image"
          media="(device-width: 768px)
             and (orientation: portrait)"
          href="apple-touch-startup-image-768x1004.png">
    <link rel="apple-touch-startup-image"
          media="(device-width: 768px)
             and (orientation: landscape)"
          href="apple-touch-startup-image-748x1024.png">
    <link rel="apple-touch-startup-image"
          media="(device-width: 768px)
             and (orientation: portrait)
             and (-webkit-device-pixel-ratio: 2)"
          href="apple-touch-startup-image-1536x2008.png">
    <link rel="apple-touch-startup-image"
          media="(device-width: 768px)
             and (orientation: landscape)
             and (-webkit-device-pixel-ratio: 2)"
          href="apple-touch-startup-image-1496x2048.png">

However, there is one oddity about the iPad. It might not load the
startup images the first time around, so they'll only appear after
the web app has been launched at least once. And the landscape
startup image might not be displayed until the portrait image has
been displayed at least once.

## Complete Example

I've created [a minimal mobile web app][4] that fully specifies all
icons and startup images for iOS devices. I've tested it on iOS 5.0
with an iPhone, a retina iPod touch, an iPad, and a retina iPad.

I also copied my minimal example over to [a Gist][5]. If you notice
anything wrong with my implementation, or if you'd like to suggest
improvements, please do so there.

## Other Platforms

Although I don't have any devices to test it on, apparently the
icons work on Android. As far as I understand it, startup images
are not supported. Unfortunately the Android documentation doesn't
mention anything about icons or startup images for mobile web apps.

Icons and startup images are completely unsupported on Windows Phone
7. However, it is possible to create [mobile web app tiles on Windows
Phone 7][6] using techniques completely unrelated to this post.

[1]: http://developer.apple.com/library/ios/#DOCUMENTATION/AppleApplications/Reference/SafariWebContent/ConfiguringWebApplications/ConfiguringWebApplications.html
[2]: https://gist.github.com/472519
[3]: https://developer.mozilla.org/en/CSS/Media_queries#-moz-device-pixel-ratio
[4]: /static/pages/2012-03-27-mobile-web-app.html
[5]: https://gist.github.com/2222823
[6]: /2012/02/03/windows-phone-7-web-page-tiles/
